<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>auik_prod</groupId>
  <artifactId>auik_prod</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <dependencies>
    <!-- hibernate tools & dependencies-->
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-tools</artifactId>
      <version>5.0.0.Final</version>
	  <scope>test</scope>
	  <exclusions>
        <exclusion>
          <groupId>commons-logging</groupId>
          <artifactId>commons-logging</artifactId>
        </exclusion>
      </exclusions>
	</dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.7.21</version>
      <scope>test</scope>
    </dependency>
    
	<dependency>
      <groupId>jgoodies</groupId>
      <artifactId>forms</artifactId>
      <version>1.0.5</version>
    </dependency>
    <dependency>
      <groupId>com.toedter</groupId>
      <artifactId>jcalendar</artifactId>
      <version>1.2.2</version>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.11</version>
    </dependency>
    <dependency>
      <groupId>jgoodies</groupId>
      <artifactId>looks</artifactId>
      <version>1.2.2</version>
    </dependency>
    <dependency>
      <groupId>org.glassfish.jersey.core</groupId>
      <artifactId>jersey-client</artifactId>
      <version>2.22.2</version>
    </dependency>
    <dependency>
      <groupId>javax.ws.rs</groupId>
      <artifactId>javax.ws.rs-api</artifactId>
      <version>2.0.1</version>
    </dependency>
    <dependency>
      <groupId>net.sf.jasperreports</groupId>
      <artifactId>jasperreports</artifactId>
      <version>6.2.2</version>
    </dependency>
    <dependency>
      <groupId>org.jfree</groupId>
      <artifactId>jfreechart</artifactId>
      <version>1.0.19</version>
    </dependency> 
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-search-orm</artifactId>
      <version>5.4.0.Final</version>
    </dependency>
    <dependency>
      <groupId>org.glassfish.hk2</groupId>
      <artifactId>hk2-api</artifactId>
      <version>2.4.0-b34</version>
    </dependency>
    <dependency>
      <groupId>org.glassfish.hk2</groupId>
      <artifactId>hk2-locator</artifactId>
      <version>2.4.0-b34</version>
    </dependency>
    <dependency>
      <groupId>com.ibm.icu</groupId>
      <artifactId>icu4j</artifactId>
      <version>57.1</version>
    </dependency>
    <dependency>
      <groupId>com.fasterxml.jackson.core</groupId>
      <artifactId>jackson-annotations</artifactId>
      <version>2.7.0</version>
    </dependency>
    <dependency>
      <groupId>org.glassfish.hk2.external</groupId>
      <artifactId>javax.inject</artifactId>
      <version>2.4.0-b34</version>
    </dependency>
    <dependency>
      <groupId>org.glassfish.jersey.ext</groupId>
      <artifactId>jersey-entity-filtering</artifactId>
      <version>2.22.1</version>
    </dependency>
    <dependency>
      <groupId>org.glassfish.jersey.bundles.repackaged</groupId>
      <artifactId>jersey-guava</artifactId>
      <version>2.22.2</version>
    </dependency>
    <dependency>
      <groupId>org.apache.logging.log4j</groupId>
      <artifactId>log4j-1.2-api</artifactId>
      <version>2.5</version>
    </dependency>
    <dependency>
      <groupId>org.apache.logging.log4j</groupId>
      <artifactId>log4j-api</artifactId>
      <version>2.5</version>
    </dependency>
    <dependency>
      <groupId>org.postgresql</groupId>
      <artifactId>postgresql</artifactId>
      <version>9.4.1208.jre7</version>
    </dependency>
    <dependency>
      <groupId>com.cloudhopper.proxool</groupId>
      <artifactId>proxool</artifactId>
      <version>0.9.1</version>
    </dependency>
    <dependency>
      <groupId>org.w3c.css</groupId>
      <artifactId>sac</artifactId>
      <version>1.3</version>
    </dependency>
    <dependency>
      <groupId>xml-apis</groupId>
      <artifactId>xml-apis</artifactId>
      <version>1.3.03</version>
    </dependency>
    <!-- Additional dependencies -->
    <dependency>
      <groupId>com.l2fprod.common</groupId>
      <artifactId>l2fprod-common-shared</artifactId>
      <version>6.9.1</version>
    </dependency>
    <dependency>
      <groupId>javax.jms</groupId>
      <artifactId>jms-api</artifactId>
      <version>1.1-rev-1</version>
    </dependency>
    <dependency>
      <groupId>com.jgoodies</groupId>
      <artifactId>uif_lite</artifactId>
      <version>1.0</version>
    </dependency>
    <dependency>
      <groupId>com.l2fprod.common</groupId>
      <artifactId>l2fprod-common-buttonbar</artifactId>
      <version>6.9.1</version>
    </dependency>
    <dependency>
      <groupId>commons-codec</groupId>
      <artifactId>commons-codec</artifactId>
      <version>1.10</version>
    </dependency>
 </dependencies>

  <!-- jboss public repository-->
  <repositories>
    <repository>
      <id>repository.jboss.org-public</id>
      <name>JBoss.org Maven repository</name>
      <url>https://repository.jboss.org/nexus/content/groups/public</url>
    </repository>
  </repositories>  

  <build>
    <sourceDirectory>src</sourceDirectory>
	<resources>
	  <resource>
	    <directory>src</directory>
		<excludes>
          <exclude>**/*.java</exclude>
		</excludes>
	  </resource>
      <!-- If needed: include log4j config -->
	  <resource>
		<directory>src/de/bielefeld/umweltamt/aui/resources/config/</directory>
	    <includes>
		  <include>log4j2.properties</include>
		</includes>
	  </resource>
     </resources>
     <plugins>
       <plugin>
         <artifactId>maven-compiler-plugin</artifactId>
         <version>3.1</version>
         <configuration>
		   <source>1.6</source>
           <target>1.6</target>
         </configuration>
       </plugin>
	   <plugin>
         <artifactId>maven-assembly-plugin</artifactId>
         <version>2.5.5</version>
         <configuration>
           <descriptorRefs>
             <descriptorRef>jar-with-dependencies</descriptorRef>
           </descriptorRefs>
           <archive>
             <manifest>
               <mainClass>de.bielefeld.umweltamt.aui.AUIKataster</mainClass>
             </manifest>
           </archive>
         </configuration>
         <executions>
           <execution>
             <id>make-assembly</id>
             <phase>package</phase>
             <goals>
               <goal>single</goal>
             </goals>
           </execution>
         </executions>
      </plugin>

	  <!--install local jars via install plugin,
		  use "mvn validate" before compiling -->
	  <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-install-plugin</artifactId>
   		<version>2.5.1</version>
    	<configuration>
       	  <groupId>com.jgoodies</groupId>
          <artifactId>uif_lite</artifactId>
      	  <version>1.0</version>
      	  <packaging>jar</packaging>
      	  <file>${project.basedir}/lib/com.jgoodies.uif_lite.jar</file>
      	  <generatePom>true</generatePom>
   		</configuration>
  		<executions>
      	  <execution>
         	<id>install-jar-lib</id>
         	<goals>
              <goal>install-file</goal>
         	</goals>
         	<phase>validate</phase>
      	  </execution>
   		</executions>
	  </plugin>
	  	  <plugin>
	    <artifactId>maven-antrun-plugin</artifactId>
        <version>1.8</version>
        <executions>
          <!--run hibernate tools via antrun plugin, generate mapping files
		  Overwrites old mapping files              
          TODO: run with mvn antrun:run@db2mapping -->

		  <!--<execution>
			<id>db2mapping</id>
		    <phase>generate-sources</phase>
            <configuration>
              <property name="src"        location="src" />
			  <property name="resources"  value="src/de/bielefeld/umweltamt/aui/resources" />
              <property name="config"     value="src/de/bielefeld/umweltamt/aui/resources/config" />
			  <property name="data" location="data" />
			  <target>
			    <property name="maven_compile_classpath" refid="maven.compile.classpath"/>
                <property name="maven_test_classpath" refid="maven.test.classpath"/>
				<path id="hibernatetool.path">
					<pathelement path="${maven_compile_classpath}"/>
					<pathelement path="${maven_test_classpath}"/>
                </path>
				<taskdef name="hibernatetool"
                  classname="org.hibernate.tool.ant.HibernateToolTask"
                	  classpathref="hibernatetool.path" />
                
                <hibernatetool destdir="src">
                  <jdbcconfiguration
                    propertyfile="src/de/bielefeld/umweltamt/aui/resources/config/hibernate.properties"
                    revengfile="src/de/bielefeld/umweltamt/aui/resources/config/hibernate.reveng.xml">
                  </jdbcconfiguration>
				  <hbmtemplate
                	templatepath="data/templates/auik"
                	template="Pojo.ftl"
                	filepattern="{package-name}/{class-name}.java">
                	<property key="jdk5" value="true" />
                	<property key="ejb3" value="false" />
					<property key="sessionFactoryName" value="de.bielefeld.umweltamt.aui.HibernateSessionFactory"/> 
            	  </hbmtemplate>
                  <hbm2hbmxml destdir="src"/> 
                  <hbm2cfgxml destdir="src" />
                </hibernatetool>
		      </target>
            </configuration>
		    <goals>
		      <goal>run</goal>
		    </goals>
		  </execution> -->

		  <!-- Use ant task to copy created jar files to another directory-->
		  <!-- Append current date to filename -->
		  <execution>
		  	<id>copy-jars</id>
			<phase>install</phase>
			<configuration>
			  <target>
				<tstamp>
                  <format property="today" pattern="yyyy-MM-dd"/>
  				</tstamp>
			    <copy todir="jars">
				  <fileset dir="target">
				    <include name="*.jar"/>
		  		  </fileset>
				  <globmapper from="*.jar" to="*-${today}.jar"/>
				</copy>
			  </target>
            </configuration>
			<goals>
			  <goal>run</goal>
			</goals>
		  </execution>	
		</executions>		
      </plugin>
    </plugins>
  </build>
</project>
